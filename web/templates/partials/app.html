<!DOCTYPE html>
<html lang="en" class="sl-theme-dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    {{template "partials/scripts" .}}
</head>

<body hx-ext="shoelace">
    {{template "partials/settings-dialog" .}}
    {{template "partials/new-group-dialog" .}}
    <div hx-ext="debug" class="flex flex-col h-full overflow-hidden">
        <header id="header" class="p-4 bg-n200 flex justify-between">
            <nav class="flex items-center text-xl">
                <sl-breadcrumb>
                    <sl-breadcrumb-item href="/chat">Home</sl-breadcrumb-item>
                    {{if ne .Group nil}}
                    <sl-breadcrumb-item href="/chat/groups/{{.Group.Id}}">
                        <sl-icon name="people" slot="prefix"></sl-icon>
                        {{.Group.Nick}}
                        <!-- implement gruoup managing -->
                        <!-- <sl-icon-button name="gear" slot="suffix"></sl-icon-button> -->
                    </sl-breadcrumb-item>
                    {{end}}
                </sl-breadcrumb>
                <!-- TODO: implement search -->
            </nav>
            <nav class="flex items-center">
                {{template "partials/avatar-context-menu" .}}
            </nav>
        </header>
        {{if ne .Group nil}}
        <div id="content" hx-ext="ws" ws-connect="/chat/groups/{{.Group.Id}}" hx-swap="innerHTML">
        {{template "partials/chat-group" .}}
        </div>
        {{else}}
        <div id="content">
            {{template "partials/app-home" .}}
        </div>
        {{end}}
    </div>
</body>

</html>